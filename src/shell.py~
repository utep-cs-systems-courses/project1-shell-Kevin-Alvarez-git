#! /usr/bin/env python3

import os
import sys
import re

# Check if $PS1 is set
try:
    sys.ps1
except AttributeError:
    sys.ps1 = "$ " 

user_in = input(sys.ps1)

while user_in != "exit":
    rc = os.fork()

    if rc < 0:
        print("Error at forking")
        sys.exit(1)

    elif rc == 0:
        print("Child process")
        args = ["wc", "Test.java"]
        for dir in re.split(":", os.environ['PATH']):
            prompt = "%s%s" % (dir, args[0])
            try:
                os.execve(prompt, args, os.environ)
            except FileNotFoundError:
                print("Command couldn't be executed")
                pass

        sys.exit(1)

    else:
        print("Parent process")
        child_pid = os.wait()
        print(child_pid)
    
    user_in = input(sys.ps1)
    break

